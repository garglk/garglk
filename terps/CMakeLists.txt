function(interpreter TARGET SRCS)
  add_executable(${TARGET} ${SRCS})
  set_target_properties(${TARGET} PROPERTIES OUTPUT_NAME "${GARGLKPRE}${TARGET}")
  target_compile_definitions(${TARGET} PRIVATE GARGLK)
  target_link_libraries(${TARGET} glkmain garglk)
  install(TARGETS ${TARGET} DESTINATION libexec/gargoyle)
endfunction()

include_directories(../garglk)

add_subdirectory(advsys)
add_subdirectory(agility)
add_subdirectory(alan2)
add_subdirectory(alan3)
add_subdirectory(bocfel)
add_subdirectory(frotz)
add_subdirectory(geas)
add_subdirectory(git)
add_subdirectory(glulxe)
add_subdirectory(hugo)
add_subdirectory(jacl)
add_subdirectory(level9)
add_subdirectory(magnetic)
add_subdirectory(nitfol)
add_subdirectory(scott)

if(UNIX)
  find_package(ZLIB)
  if(ZLIB_FOUND)
    add_subdirectory(scare)
  endif()
elseif(MINGW)
  add_subdirectory(scare)
endif()
